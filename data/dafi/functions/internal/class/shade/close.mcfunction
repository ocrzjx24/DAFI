##> dafi:internal/class/shade/close
# honestly no idea lmaooo
#
# callers:
# > ?

execute if score @s dafi.shade.checkIn matches 1.. run scoreboard players set @s dafi.shade.checkIn 0
execute at @s[team=!blue] if entity @e[team=!red,scores={dafi.shade.castTagged=1..},distance=..6] run scoreboard players set @s dafi.shade.checkIn 1
execute at @s[team=!red] if entity @e[team=!blue,scores={dafi.shade.castTagged=1..},distance=..6] run scoreboard players set @s dafi.shade.checkIn 1

## SWORD SWITCHING
execute if score @s[tag=!dafi.shade.processedDSword] dafi.shade.checkIn matches 1 at @s run item replace entity @s hotbar.1 with minecraft:diamond_sword{display:{Name:'[{"text":"Oni","italic":false,"bold":true,"color":"aqua"},{"text":"kiri","color":"dark_aqua"},{"text":" | ","color":"dark_gray","bold":false},{"text":"[","color":"white","bold":false},{"text":"âŒ›","color":"gray","bold":false},{"text":"]","color":"white","bold":false},{"text":"/","color":"dark_gray","bold":false},{"text":"[","color":"white","bold":false},{"text":"âŒ›","color":"gray","bold":false},{"text":"]","color":"white","bold":false}]',Lore:['[{"text":"Type: ðŸ§ª ","italic":false,"color":"green"},{"text":"/","color":"dark_green"},{"text":" ðŸ”¥"}]']},Unbreakable:1,Enchantments:[{id:"minecraft:unbreaking",lvl:1}],AttributeModifiers:[{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Slot:"mainhand",Amount:5,Operation:2,UUID:[I;1060846863,1081870173,1010577874,1859017242]},{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Slot:"mainhand",Amount:20,Operation:0,UUID:[I;1060846863,1081870173,1010577874,1859017242]}],HideFlags:7} 1
execute if score @s[tag=!dafi.shade.processedDSword] dafi.shade.checkIn matches 1 at @s run playsound minecraft:entity.allay.item_thrown master @a[distance=..7] ~ ~ ~ 1 1.5
execute if score @s[tag=!dafi.shade.processedDSword] dafi.shade.checkIn matches 0 run clear @s diamond_sword
execute if score @s[tag=dafi.shade.processedDSword] dafi.shade.checkIn matches 0 run tag @s remove dafi.shade.processedDSword
execute if score @s[tag=!dafi.shade.processedDSword] dafi.shade.checkIn matches 1 run tag @s add dafi.shade.processedDSword

execute if score @s[tag=!dafi.shade.processedISword] dafi.shade.checkIn matches 0 if score @s dropNetheriteSword matches 1..59 run item replace entity @s hotbar.1 with minecraft:iron_sword{display:{Name:'[{"text":"Oni","italic":false,"bold":true,"color":"gray"},{"text":"kiri ","color":"dark_gray"},{"text":"| ","color":"dark_gray","bold":false},{"text":"[","color":"white","bold":false},{"text":"âŒ›","bold":false},{"text":"]","bold":false,"color":"white"},{"text":"/","bold":false,"color":"dark_gray"},{"text":"[","bold":false,"color":"white"},{"text":"âŒ›","bold":false},{"text":"]","bold":false,"color":"white"}]',Lore:['[{"text":"Type: ðŸ§ª ","italic":false,"color":"green"},{"text":"/","color":"dark_green"},{"text":" ðŸ”¥"}]']},Unbreakable:1,Enchantments:[{id:"minecraft:unbreaking",lvl:1}],AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Slot:"mainhand",Amount:7.5,Operation:0,UUID:[I;1066926894,1082457494,1046104757,1644840798]},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Slot:"mainhand",Amount:-0.2,Operation:2,UUID:[I;1066926894,1082457494,1046104757,1644840798]}],HideFlags:3} 1
execute if score @s[tag=!dafi.shade.processedISword] dafi.shade.checkIn matches 0 if score @s dropNetheriteSword matches 1..59 at @s run playsound minecraft:entity.allay.item_thrown master @s ~ ~ ~ 1 1.35
execute if score @s[tag=dafi.shade.processedISword] dafi.shade.checkIn matches 1 if score @s dropNetheriteSword matches 1..59 run tag @s remove dafi.shade.processedISword
execute if score @s[tag=!dafi.shade.processedISword] dafi.shade.checkIn matches 0 if score @s dropNetheriteSword matches 1..59 run tag @s add dafi.shade.processedISword

execute if score @s[tag=!dafi.shade.processedNSword] dafi.shade.checkIn matches 0 if score @s dropNetheriteSword matches 0 run item replace entity @s hotbar.1 with minecraft:netherite_sword{display:{Name:'[{"text":"Oni","italic":false,"bold":true,"color":"light_purple"},{"text":"kiri ","color":"dark_purple"},{"text":"| ","color":"dark_gray","bold":false},{"text":"[Q]","color":"white","bold":false},{"text":"/","color":"dark_gray","bold":false},{"text":"[RMB]","color":"white","bold":false}]',Lore:['[{"text":"Type: ðŸ§ª ","italic":false,"color":"green"},{"text":"/","color":"dark_green"},{"text":" ðŸ”¥"}]']},Unbreakable:1,Enchantments:[{id:"minecraft:unbreaking",lvl:1}],AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Slot:"mainhand",Amount:10,Operation:0,UUID:[I;1069942072,1057578295,1077372865,1692893952]},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Slot:"mainhand",Amount:-0.2,Operation:2,UUID:[I;1069942072,1057578295,1077372865,1692893952]}],HideFlags:7} 1
execute if score @s[tag=!dafi.shade.processedNSword] dafi.shade.checkIn matches 0 if score @s dropNetheriteSword matches 0 at @s run playsound minecraft:entity.allay.item_thrown master @s ~ ~ ~ 1 1.35
execute if score @s[tag=dafi.shade.processedNSword] dafi.shade.checkIn matches 1 if score @s dropNetheriteSword matches 0 run tag @s remove dafi.shade.processedNSword
execute if score @s[tag=!dafi.shade.processedNSword] dafi.shade.checkIn matches 0 if score @s dropNetheriteSword matches 0 run tag @s add dafi.shade.processedNSword
