# kill to prevent late antidrop
kill @e[type=item,nbt={Item:{id:"minecraft:crossbow"}}]
# clear @s crossbow

# dafi.siege.mode
scoreboard players add @s dafi.siege.mode 1
execute if score @s dafi.siege.mode matches 2.. run scoreboard players set @s dafi.siege.mode 0

scoreboard players set @s dafi.siege.ICFB 1
# execute if predicate dafi:is_not_sneaking run scoreboard players add @s dafi.siege.mode 1
# execute if predicate dafi:is_sneaking if score @s dafi.siege.mode matches 1.. run scoreboard players remove @s dafi.siege.mode 1
# execute if predicate dafi:is_sneaking if score @s dafi.siege.mode matches 0 run scoreboard players set @s dafi.siege.mode 3
# execute if score @s dafi.siege.mode matches 4.. run scoreboard players set @s dafi.siege.mode 0

# item replacement
# execute if entity @s[team=blue,scores={dafi.siege.mode=0}] unless entity @s[scores={dafi.mechanics.arrowCD=0..}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:255,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
# execute if entity @s[team=red,scores={dafi.siege.mode=0}] unless entity @s[scores={dafi.mechanics.arrowCD=0..}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:16711680,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
# execute if entity @s[scores={dafi.siege.mode=0},scores={dafi.mechanics.arrowCD=1..30}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5}],Unbreakable:1,HideFlags:1} 1

execute unless entity @s[scores={dafi.arrow.CD=0..}] if entity @s[team=blue,scores={dafi.siege.mode=0}] run item replace entity @s hotbar.0 with crossbow{mainhand:1,display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:arrow",Count:1b}],Charged:1b,HideFlags:36} 1
execute unless entity @s[scores={dafi.arrow.CD=0..}] if entity @s[team=red,scores={dafi.siege.mode=0}] run item replace entity @s hotbar.0 with crossbow{mainhand:1,display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:arrow",Count:1b}],Charged:1b,HideFlags:36} 1
execute if entity @s[scores={dafi.arrow.CD=1..30,dafi.siege.mode=0}] run item replace entity @s hotbar.0 with crossbow{mainhand:1,display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5}],Unbreakable:1,HideFlags:1} 1

execute unless entity @s[scores={dafi.siege.shotgunCD=0..}] if entity @s[scores={dafi.siege.mode=1}] run item replace entity @s hotbar.0 with crossbow{mainhand:1,display:{Name:'[{"text":".EXE","italic":false,"color":"gray","bold":true},{"text":"CUTIONER","italic":false,"bold":true,"color":"dark_gray"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:arrow",Count:1b}],Charged:1b,HideFlags:36} 1
execute if entity @s[scores={dafi.siege.shotgunCD=1..30,dafi.siege.mode=1}] run item replace entity @s hotbar.0 with crossbow{mainhand:1,display:{Name:'[{"text":".EXE","italic":false,"color":"gray","bold":true},{"text":"CUTIONER","italic":false,"bold":true,"color":"dark_gray"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5}],Unbreakable:1,HideFlags:1} 1

advancement revoke @s only dafi:inventory_changed

# execute unless entity @s[scores={dafi.siege.shotgunCD=0..}] if entity @s[scores={dafi.siege.mode=2}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"gatling ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:0,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
# execute if entity @s[scores={dafi.siege.shotgunCD=1..30,dafi.siege.mode=2}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"gatling ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5}],Unbreakable:1,HideFlags:1} 1

# execute unless entity @s[scores={dafi.siege.shotgunCD=0..}] if entity @s[scores={dafi.siege.mode=3}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"sniper ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:0,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
# execute if entity @s[scores={dafi.siege.shotgunCD=1..30,dafi.siege.mode=3}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"sniper ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5}],Unbreakable:1,HideFlags:1} 1

# execute if entity @s[team=blue,scores={dafi.siege.mode=0}] unless entity @s[scores={dafi.mechanics.arrowCD=0..}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:255,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
# execute if entity @s[team=red,scores={dafi.siege.mode=0}] unless entity @s[scores={dafi.mechanics.arrowCD=0..}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:16711680,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
# execute if entity @s[scores={dafi.siege.mode=0},scores={dafi.mechanics.arrowCD=1..30}] run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5}],Unbreakable:1,HideFlags:1} 1

# say AAAAAAAAAAAAAAAAAAAAAUGH

# advancement revoke @s[tag=!siege] only dafi:inventory_changed