# execute unless score @s dafi.siege.fishingRodCD matches 1.. unless score @s dafi.siege.ICFB matches 1.. if score @s crossbowMainhand matches 0 run item replace entity @s[tag=!dafi.siege.offhand.processed] weapon.offhand with fishing_rod
# execute unless score @s dafi.siege.fishingRodCD matches 1.. unless score @s dafi.siege.ICFB matches 1.. if score @s crossbowMainhand matches 0 run tag @s[tag=!dafi.siege.offhand.processed] add dafi.siege.offhand.processed
# execute unless score @s crossbowMainhand matches 1 if score @s dafi.siege.fishingRodCD matches 0 run item replace entity @s weapon.offhand with fishing_rod

# execute if score @s crossbowMainhand matches 1 as @e[type=fishing_bobber,tag=dafi.siege.bobberinrange] as @a[tag=dafi.siege.main] at @s run playsound minecraft:block.chain.hit master @a[distance=..5] ~ ~ ~ 1 1.5
# execute if score @s crossbowMainhand matches 1 as @e[type=fishing_bobber,tag=dafi.siege.bobberinrange] as @e[type=fishing_bobber,tag=dafi.siege.bobberinrange] as @a[tag=dafi.siege.main] run clear @s fishing_rod
# execute if score @s crossbowMainhand matches 1 as @e[type=fishing_bobber,tag=dafi.siege.bobberinrange] as @e[type=fishing_bobber,tag=dafi.siege.bobberinrange] run kill @s

# execute if score @s crossbowMainhand matches 1 run clear @s[tag=dafi.siege.offhand.processed] fishing_rod 
# execute if score @s crossbowMainhand matches 1 run tag @s[tag=dafi.siege.offhand.processed] remove dafi.siege.offhand.processed

# execute unless score @s crossbowMainhand matches 1 run scoreboard players set @s dafi.siege.mode 0
execute unless score @s dafi.mechanics.arrowCD matches 0.. unless score @s dafi.siege.ICFB matches 1.. unless score @s dafi.mechanics.crossbowMainhand matches 1 if score @s[team=red] dafi.siege.mode matches 1 run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:16711680,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
execute unless score @s dafi.mechanics.arrowCD matches 0.. unless score @s dafi.siege.ICFB matches 1.. unless score @s dafi.mechanics.crossbowMainhand matches 1 if score @s[team=blue] dafi.siege.mode matches 1 run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5},{id:"knockback",lvl:1}],Unbreakable:1,ChargedProjectiles:[{id:"minecraft:tipped_arrow",Count:1b,tag:{CustomPotionColor:255,CustomPotionEffects:[{Id:7,Duration:1,Amplifier:4,ShowParticles:0b,ShowIcon:0b}]}}],Charged:1b,HideFlags:36} 1
execute if score @s dafi.mechanics.arrowCD matches 1.. unless score @s dafi.siege.ICFB matches 1.. unless score @s dafi.mechanics.crossbowMainhand matches 1 if score @s dafi.siege.mode matches 1 run item replace entity @s hotbar.0 with crossbow{display:{Name:'[{"text":"JSN ","italic":false,"color":"yellow","bold":true},{"text":"X13","italic":false,"bold":true,"color":"gold"}]',Lore:['[{"text":"death.attack.firework.item","italic":false,"color":"dark_green"}]']},Enchantments:[{id:"quick_charge",lvl:5}],Unbreakable:1,HideFlags:1} 1

execute unless score @s dafi.siege.ICFB matches 1.. unless score @s dafi.mechanics.crossbowMainhand matches 1 if score @s dafi.siege.mode matches 1 run scoreboard players set @s dafi.siege.mode 0